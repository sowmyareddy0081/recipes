<!DOCTYPE html>
<head>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f7f3f0;
    margin: 0;
    padding: 20px;
    min-height: 100vh;
  }
  h1 {
    text-align: center;
    color: #5e3d2b;
    margin-bottom: 30px;
  }
  .home-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-top: 30px;
  }
  .home-card {
    background: white;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    text-align: center;
    padding: 15px;
    cursor: pointer;
    transition: transform 0.3s ease;
    user-select: none;
  }
  .home-card:hover {
    transform: scale(1.03);
  }
  .home-card img {
    width: 100%;
    border-radius: 10px;
    max-height: 170px;
    object-fit: cover;
  }
  .home-card h2 {
    color: #5e3d2b;
    margin: 15px 0 10px;
    font-size: 1.25em;
  }
  .show-btn {
    background: #8B4513;
    color: #fff;
    padding: 10px 15px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background 0.3s;
    margin-top: 10px;
  }
  .show-btn:hover { background: #6a3410;}
  .hidden {display: none;}

  /* Recipe Card View */
  .recipe-detail-card {
    background: white;
    max-width: 500px;
    width: 100%;
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    animation: fadeIn 1.0s;
    margin: 32px auto 0 auto;
  }
  .recipe-title {
    text-align: center;
    color: #5e3d2b;
    font-size: 2em;
  }
  .recipe-img {
    width: 100%;
    max-width: 400px;
    border-radius: 10px;
    margin: 0 auto 15px auto;
    display: block;
  }
  .recipe-info {
    display: flex;
    justify-content: space-around;
    margin-bottom: 15px;
    font-weight: bold;
    flex-wrap: wrap;
    gap: 8px;
  }
  .toggle-btn {
    background: #8B4513;
    color: white;
    border: none;
    padding: 8px 15px;
    margin: 5px 4px 14px 0;
    cursor: pointer;
    border-radius: 8px;
    transition: background 0.3s;
    font-size: 1em;
    user-select: none;
  }
  .toggle-btn:hover {background: #6a3410;}
  .ingredients, .steps {margin-bottom: 14px;}
  .recipe-back-link {
    display: inline-block;
    margin: 12px 0 5px 0;
    text-decoration: none;
    color: #8B4513;
    font-weight: bold;
    font-size: 1.1em;
    background: #f1e9e2;
    border-radius: 6px;
    padding: 6px 14px;
    transition: background 0.2s;
    user-select: none;
  }
  .recipe-back-link:hover {background: #e9cebb;}
  .steps li {
    padding: 6px 12px;
    border-radius: 6px;
    margin-bottom: 8px;
    background: #fef8f4;
    transition: background 0.3s;
  }
  .steps li.current-step {
    background: #fde4c4;
    font-weight: bold;
  }
  #timer {
    font-weight: bold;
    font-size: 1.1em;
    margin-bottom: 12px;
    color: #5e3d2b;
    text-align: center;
  }
  .button-container {
    display: flex;
    justify-content: center;
    gap: 12px;
    margin-bottom: 20px;
    flex-wrap: wrap;
  }
  button.control-btn {
    background-color: #8B4513;
    border: none;
    color: white;
    padding: 10px 18px;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s;
    font-size: 1em;
    user-select: none;
  }
  button.control-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  button.control-btn:hover:not(:disabled) {
    background-color: #6a3410;
  }
  @keyframes fadeIn {from {opacity: 0; transform: translateY(20px);} to {opacity: 1; transform: translateY(0);}}
  @media (max-width: 600px) {
    .recipe-detail-card {padding: 8px; max-width: 99vw;}
    .recipe-img {max-width: 98vw;}
    .home-container {grid-template-columns: 1fr;}
  }
</style>
</head>

<body>
  <h1>üç¥ Our Recipe Collection</h1>

  <div id="home" class="home-container" aria-label="Recipe list">
    <div class="home-card" role="button" tabindex="0" onclick="showRecipe('icecream')" onkeypress="if(event.key==='Enter'){showRecipe('icecream')}">
      <img src="https://images4.alphacoders.com/212/thumb-1920-212256.jpg" alt="Homemade Ice Cream" />
      <h2>Homemade Ice Cream</h2>
      <button type="button" class="show-btn" onclick="event.stopPropagation(); showRecipe('icecream');">View Recipe</button>
    </div>

    <div class="home-card" role="button" tabindex="0" onclick="showRecipe('chai')" onkeypress="if(event.key==='Enter'){showRecipe('chai')}">
      <img src="https://thespicerootindiancuisine.com/wp-content/uploads/2023/03/Indian-Masala-Tea.jpg" alt="Masala Tea" />
      <h2>Masala Tea (Chai)</h2>
      <button type="button" class="show-btn" onclick="event.stopPropagation(); showRecipe('chai');">View Recipe</button>
    </div>

    <div class="home-card" role="button" tabindex="0" onclick="showRecipe('biryani')" onkeypress="if(event.key==='Enter'){showRecipe('biryani')}">
      <img src="https://static.vecteezy.com/system/resources/previews/024/650/050/non_2x/gourmet-chicken-biryani-with-steamed-basmati-rice-generated-by-ai-free-photo.jpg" alt="Chicken Biryani" />
      <h2>Chicken Biryani</h2>
      <button type="button" class="show-btn" onclick="event.stopPropagation(); showRecipe('biryani');">View Recipe</button>
    </div>

    <div class="home-card" role="button" tabindex="0" onclick="showRecipe('cake')" onkeypress="if(event.key==='Enter'){showRecipe('cake')}">
      <img src="https://th.bing.com/th/id/OIP.fml7FrfJhdjfo9DRrfbL8wHaFj?w=221&h=180&c=7&r=0&o=7&dpr=1.3&pid=1.7&rm=3" alt="Chocolate Cake" />
      <h2>Chocolate Cake</h2>
      <button type="button" class="show-btn" onclick="event.stopPropagation(); showRecipe('cake');">View Recipe</button>
    </div>
  </div>
  <div id="recipe-detail" class="hidden" aria-live="polite" aria-atomic="true"></div>

<script>
  const recipes = {
    icecream: {
      title: "Homemade Ice Cream",
      img: "https://images4.alphacoders.com/212/thumb-1920-212256.jpg",
      info: [
        "Prep: <strong>20 min</strong>",
        "Freeze: <strong>4 hrs</strong>",
        "Servings: <strong>6</strong>"
      ],
      ingredients: [
        "2 cups heavy cream",
        "1 cup whole milk",
        "3/4 cup sugar",
        "1 tsp vanilla extract",
        "Pinch of salt",
        "Optional: Chocolate chips, fruits, or toppings"
      ],
      steps: [
        "Whisk together cream, milk, sugar, salt, and vanilla.",
        "Pour mixture into ice cream maker and churn, or freeze and stir every 30 mins.",
        "When thickened, transfer to a container.",
        "Freeze 4 hours or until firm.",
        "Scoop into bowls, add toppings, and serve."
      ],
      stepTimesSec: [40, 120, 30, 900, 60]
    },
    chai: {
      title: "Masala Tea (Chai)",
      img: "https://thespicerootindiancuisine.com/wp-content/uploads/2023/03/Indian-Masala-Tea.jpg",
      info: [
        "Prep: <strong>5 min</strong>",
        "Cook: <strong>15 min</strong>",
        "Servings: <strong>2 cups</strong>"
      ],
      ingredients: [
        "2 cups water",
        "1 cup milk",
        "2‚Äì3 tsp black tea leaves (or 2 tea bags)",
        "2‚Äì3 tsp sugar (adjust to taste)",
        "3‚Äì4 green cardamoms (lightly crushed)",
        "1 inch piece fresh ginger (grated)",
        "2 cloves",
        "1 small cinnamon stick",
        "2‚Äì3 black peppercorns (optional)"
      ],
      steps: [
        "Bring water to a boil.",
        "Add ginger, cardamom, cloves, cinnamon, peppercorns; simmer 3‚Äì4 minutes.",
        "Add tea leaves, boil 2 minutes.",
        "Add milk and sugar, boil 5 more minutes.",
        "Strain into cups and serve hot."
      ],
      stepTimesSec: [60, 240, 120, 300, 30]
    },
    biryani: {
      title: "Chicken Biryani",
      img: "https://static.vecteezy.com/system/resources/previews/024/650/050/non_2x/gourmet-chicken-biryani-with-steamed-basmati-rice-generated-by-ai-free-photo.jpg",
      info: [
        "Prep: <strong>1 hr</strong>",
        "Cook: <strong>45 min</strong>",
        "Servings: <strong>5</strong>"
      ],
      ingredients: [
        "2 cups Basmati rice",
        "500g chicken (cut into pieces)",
        "2 large onions (sliced)",
        "2 tomatoes (chopped)",
        "1/2 cup plain yogurt",
        "2 tbsp ginger-garlic paste",
        "3-4 green chilies (slit)",
        "Whole spices (2 bay leaves, 4 cardamoms, 1-inch cinnamon stick, 4 cloves)",
        "2 tsp biryani masala",
        "1 tsp turmeric powder",
        "2 tsp red chili powder",
        "1 bunch fresh coriander and mint leaves",
        "4 tbsp oil or ghee",
        "Saffron (a few strands soaked in warm milk)",
        "Salt to taste",
        "5 cups water"
      ],
      steps: [
        "Wash and soak rice for 30 minutes.",
        "Heat oil/ghee and fry onions until golden brown (reserve some for garnish).",
        "Add whole spices, ginger-garlic paste, and saut√©.",
        "Add chicken, turmeric, chili powder, biryani masala, and cook until half done.",
        "Mix in tomatoes, yogurt, and green chilies; cook until gravy thickens.",
        "Boil rice separately until 70% cooked, then drain.",
        "Layer half rice, then chicken masala, then rest of rice.",
        "Top with saffron milk, fried onions, coriander, and mint.",
        "Cover tightly and cook on low heat for 20‚Äì25 minutes.",
        "Mix gently and serve hot with raita or salad."
      ],
      stepTimesSec: [1800, 600, 600, 900, 900, 900, 300, 180, 1200, 300]
    },
    cake: {
      title: "Chocolate Cake",
      img: "https://th.bing.com/th/id/OIP.fml7FrfJhdjfo9DRrfbL8wHaFj?w=221&h=180&c=7&r=0&o=7&dpr=1.3&pid=1.7&rm=3",
      info: [
        "Prep: <strong>45 min</strong>",
        "Servings: <strong>8</strong>"
      ],
      ingredients: [
        "2 cups flour",
        "1.5 cups sugar",
        "1 cup cocoa powder",
        "2 tsp baking soda",
        "1 tsp salt",
        "2 eggs",
        "1 cup milk"
      ],
      steps: [
        "Preheat oven to 350¬∞F (175¬∞C).",
        "Mix dry ingredients in a bowl.",
        "Add eggs and milk; mix well.",
        "Pour into baking pan.",
        "Bake for 35 minutes.",
        "Cool and serve."
      ],
      stepTimesSec: [300, 420, 180, 30, 2100, 300]
    }
  };

  let currentRecipeKey = null;
  let currentStepIndex = 0;
  let timerInterval = null;
  let remainingTime = 0;

  function showRecipe(key) {
    if (!recipes[key]) return;
    currentRecipeKey = key;
    currentStepIndex = 0;
    clearInterval(timerInterval);
    updateTimerDisplay('');
    document.getElementById('home').classList.add('hidden');
    const r = recipes[key];
    const rd = document.getElementById('recipe-detail');
    rd.innerHTML = `
      <a href="#" class="recipe-back-link" onclick="goHome();return false;">&larr; Back to Home</a>
      <div class="recipe-detail-card">
        <h1 class="recipe-title">${r.title}</h1>
        <img src="${r.img}" alt="${r.title}" class="recipe-img" />
        <div class="recipe-info">${r.info.map(i=>`<span>${i}</span>`).join('')}</div>
        <button type="button" class="toggle-btn" id="toggleIngredientsBtn">Show Ingredients</button>
        <ul class="ingredients hidden" id="ingredientsList">${r.ingredients.map(i=>`<li>${i}</li>`).join('')}</ul>
        <div id="timer">Time Remaining: --:--</div>
        <button type="button" class="toggle-btn" id="toggleStepsBtn">Show All Steps</button>
        <ol class="steps hidden" id="stepsList">
          ${r.steps.map((step,i)=>`<li id="step-${i}">${step}</li>`).join('')}
        </ol>
        <div class="button-container">
          <button id="startStepBtn" class="control-btn">Start Steps</button>
          <button id="nextStepBtn" class="control-btn" disabled>Next Step</button>
          <button id="printRecipeBtn" class="control-btn">Print Recipe</button>
        </div>
      </div>
    `;
    rd.classList.remove('hidden');

    // Attach event listeners for toggles
    document.getElementById('toggleIngredientsBtn').onclick = () => {
      const list = document.getElementById('ingredientsList');
      list.classList.toggle('hidden');
      document.getElementById('toggleIngredientsBtn').textContent = list.classList.contains('hidden') ? 'Show Ingredients' : 'Hide Ingredients';
    };
    document.getElementById('toggleStepsBtn').onclick = () => {
      const stepsList = document.getElementById('stepsList');
      const btn = document.getElementById('toggleStepsBtn');
      const isHidden = stepsList.classList.contains('hidden');
      stepsList.classList.toggle('hidden');
      btn.textContent = isHidden ? 'Hide All Steps' : 'Show All Steps';
      if (isHidden) {
        resetSteps(false);
      } else {
        resetSteps(true);
      }
    };

    // Buttons for controlling step mode
    document.getElementById('startStepBtn').onclick = () => {
      startSteps();
      document.getElementById('toggleStepsBtn').textContent = 'Hide All Steps';
      document.getElementById('stepsList').classList.remove('hidden');
    };
    document.getElementById('nextStepBtn').onclick = () => {
      nextStep();
    };
    document.getElementById('printRecipeBtn').onclick = () => {
      window.print();
    };

    // Initially hide steps and disable step buttons
    resetSteps(true);
    window.scrollTo(0,0);
  }

  function goHome() {
    clearInterval(timerInterval);
    currentRecipeKey = null;
    currentStepIndex = 0;
    updateTimerDisplay('');
    document.getElementById('recipe-detail').classList.add('hidden');
    document.getElementById('home').classList.remove('hidden');
  }

  function updateTimerDisplay(text) {
    const timerDiv = document.getElementById('timer');
    if(timerDiv) {
      timerDiv.textContent = text ? 'Time Remaining: ' + text : 'Time Remaining: --:--';
    }
  }

  function startSteps() {
    if(!currentRecipeKey) return;
    currentStepIndex = 0;
    showStep(currentStepIndex);
    document.getElementById('startStepBtn').disabled = true;
    document.getElementById('nextStepBtn').disabled = false;
  }

  function showStep(index) {
    const stepsList = document.getElementById('stepsList');
    if(!stepsList) return;

    // Hide all steps, show only current step
    Array.from(stepsList.children).forEach((li, i) => {
      if(i === index) {
        li.style.display = 'list-item';
        li.classList.add('current-step');
        li.scrollIntoView({behavior: 'smooth', block: 'center'});
      } else {
        li.style.display = 'none';
        li.classList.remove('current-step');
      }
    });

    setupStepTimer(index);
  }

  function setupStepTimer(index) {
    clearInterval(timerInterval);
    const r = recipes[currentRecipeKey];
    if(!r) return;

    if(r.stepTimesSec && r.stepTimesSec[index] > 0) {
      remainingTime = r.stepTimesSec[index];
      updateTimerDisplay(formatTime(remainingTime));
      timerInterval = setInterval(() => {
        remainingTime--;
        if(remainingTime <= 0) {
          clearInterval(timerInterval);
          updateTimerDisplay('Step complete!');
          const nextDisabled = currentStepIndex >= r.steps.length - 1;
          document.getElementById('nextStepBtn').disabled = nextDisabled;
        } else {
          updateTimerDisplay(formatTime(remainingTime));
        }
      }, 1000);
    } else {
      updateTimerDisplay('--:--');
    }
  }

  function nextStep() {
    const r = recipes[currentRecipeKey];
    if(!r) return;
    if(currentStepIndex < r.steps.length - 1) {
      currentStepIndex++;
      showStep(currentStepIndex);
      document.getElementById('nextStepBtn').disabled = false;
    } else {
      updateTimerDisplay('All steps done!');
      document.getElementById('nextStepBtn').disabled = true;
    }
  }

  function resetSteps(showAll = true) {
    clearInterval(timerInterval);
    updateTimerDisplay('');
    currentStepIndex = 0;
    document.getElementById('startStepBtn').disabled = false;
    document.getElementById('nextStepBtn').disabled = true;

    const stepsList = document.getElementById('stepsList');
    if(!stepsList) return;

    if(showAll) {
      // Show all steps with no highlight
      Array.from(stepsList.children).forEach(li => {
        li.style.display = 'list-item';
        li.classList.remove('current-step');
      });
    } else {
      // Hide all steps
      Array.from(stepsList.children).forEach(li => {
        li.style.display = 'none';
        li.classList.remove('current-step');
      });
    }
  }

  function formatTime(seconds) {
    if (seconds < 0) seconds = 0;
    const m = Math.floor(seconds / 60);
    const s = seconds % 60;
    return `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
  }
</script>
</body>
</html>

